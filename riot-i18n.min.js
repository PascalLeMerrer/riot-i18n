(function(a,b){typeof define=="function"&&define.amd?define(["exports","riot"],function(c,d){b(a.i18n=c,d)}):typeof exports=="object"?b(exports,require("riot")):b(a.i18n={},a.riot)})(this,function(a,b){function d(){this._entities={},this._default=c,this._language=this._default;var a=b.observable();this.on=a.on,this.off=a.off,this.trigger=a.trigger,this.on("lang",this.setLanguage)}var c="en";d.prototype.dictionary=function(a){this._entities=a},d.prototype.defaultLanguage=function(a){this._default=a},d.prototype.localise=function(a,b){function e(a,b,c,d){d=d||"",b=b||{},c=c||0;var f=a&&!a.length,g=f?Object.keys(a).length:0;if(f&&g>0){var h;for(h in a)d.split(".").length>c&&(d=d.split(".").splice(0,c).join(".")),d=c==0?h:d+"."+h,b=e(a[h],b,c+1,d)}else b[d]=a;return b}var c,d;this._entities[this._language]||(c=a),c||(d=e(this._entities[this._language]),d[a]?c=d[a]:c=a);if(b){var f=e(b),g;for(g in f)c=c.replace(new RegExp("{"+g+"}","g"),f[g])}return c},d.prototype.setLanguage=function(a){this._language=a||this._default,this.trigger("update")},d.prototype.getLanguage=function(){return this._language};var e=new d,f;for(f in e)a[f]=e[f];b.mixin("i18n",{i18n:a}),b.tag2("i1-8n",'<span name="localised"></span> <span name="original" class="original"><yield></yield></span>','i1-8n,[riot-tag="i1-8n"] { display: inline-block; } i1-8n .original,[riot-tag="i1-8n"] .original { display: none; }',"",function(a){this.mixin("i18n"),this.i18n.on("update",function(){this.update()}.bind(this)),this.on("mount update",function(){this.localised.innerHTML=this.i18n.localise(this.original.innerHTML)})})});